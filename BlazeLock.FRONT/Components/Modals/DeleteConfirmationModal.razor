@if (IsVisible)
{
    <div class="fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6" style="z-index: 100;">
        <div class="absolute inset-0 bg-gray-900/60 backdrop-blur-sm transition-opacity"
             @onclick="OnClose"></div>

        <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden transform transition-all scale-100 animate-fade-in-up border border-red-100">

            <div class="p-6 text-center">
                <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-6">
                    <i class="bi bi-exclamation-triangle-fill text-3xl text-red-600"></i>
                </div>

                <h3 class="text-xl font-bold text-gray-900 mb-2">Supprimer ce coffre ?</h3>

                <p class="text-sm text-gray-500 mb-6">
                    Vous êtes sur le point de supprimer le coffre <span class="font-bold text-gray-800">"@ItemName"</span>.
                    <br /><br />
                    Cette action est <span class="font-bold text-red-600">irréversible</span>. Toutes les données, dossiers et mots de passe inclus seront perdus.
                </p>

                <div class="grid grid-cols-2 gap-3">
                    <button type="button"
                            @onclick="OnClose"
                            class="w-full px-4 py-2.5 bg-white border border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 transition-colors">
                        Annuler
                    </button>

                    <button type="button"
                            @onclick="OnConfirm"
                            disabled="@IsProcessing"
                            class="w-full px-4 py-2.5 bg-red-600 text-white rounded-xl font-bold hover:bg-red-700 shadow-lg hover:shadow-red-500/30 transition-all flex justify-center items-center disabled:opacity-50">
                        @if (IsProcessing)
                        {
                            <span class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></span>
                        }
                        else
                        {
                            <span>Supprimer</span>
                        }
                    </button>
                </div>
            </div>
        </div>
    </div>
}

@code {
    [Parameter] public bool IsVisible { get; set; }
    [Parameter] public bool IsProcessing { get; set; }
    [Parameter] public string ItemName { get; set; } = "";

    [Parameter] public EventCallback OnClose { get; set; }
    [Parameter] public EventCallback OnConfirm { get; set; }
}